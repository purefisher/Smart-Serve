\documentclass[12pt, titlepage]{article}

\usepackage{booktabs}
\usepackage{tabularx}
\usepackage{hyperref}
\hypersetup{
    colorlinks,
    citecolor=black,
    filecolor=black,
    linkcolor=red,
    urlcolor=blue
}
\usepackage[round]{natbib}

%\input{../Comments}
%\input{../Common}
\usepackage{blindtext}
\setlength{\footskip}{10pt}
\usepackage{tabularx}	
\usepackage{longtable} %allows tables to span multiple pages
\usepackage{geometry}
\usepackage{float}


%\usepackage[margin=1.25in]{geometry}
\usepackage{indentfirst} %this indents the first line after a section/subsection
\usepackage{graphicx}%to add photos
\usepackage{float} %for formatting table spacing
\usepackage{pdflscape} %used to change the orientation of some pages to landscape/portrait
\usepackage{array}
\usepackage[paper=portrait,pagesize]{typearea}


\begin{document}

\title{\textbf{4TB6: Verification and Validation Report}\\
\addlinespace
\addlinespace
\addlinespace
\addlinespace
\large \textbf{Stonecap Solutions - Smart Serve}
\addlinespace
\addlinespace
\addlinespace
\addlinespace}

\newcommand{\mycomment}[1]{} %used for a commented code section below in 6.2

\author{Max Turek $turekm$\\Ryan Were $werer$\\Sam Nusselder $nusselds$\\Peter Minbashian $minbashp$\\David Bednar $bednad1$}
\date{\today}
	
\maketitle

\pagenumbering{roman}

\section{Revision History}
 % Revision History table
        \begin{tabularx}{\textwidth}{l1X}
        \toprule
        \textbf{Date} & \textbf{Developer(s)} & \textbf{Change}\\
        \midrule
        & Max Turek & \\
        & Sam Nusselder &  \\
        03/08/23 & Ryan Were & Initial Draft\\
        & Peter Minbasian & \\
        & David Bednar & \\
        \bottomrule
        \hline
        \end{tabularx}

~\newpage
\tableofcontents

\listoftables

\newpage

\section{Symbols, Abbreviations and Acronyms}

Refer to Definitions, Terms, Acronyms and Abbreviations table in \href{https://github.com/purefisher/Smart-Serve/blob/main/docs/SRS/SRS.pdf}{SRS}.
%need to figure out how to 
\newpage
\pagenumbering{arabic}
\section{General Information}
This document serves to detail the results of our Verification and Validation Plan of our system Smart Serve.  

\subsection{Relevant Documentation}
Relevant documentation includes the \href{https://github.com/purefisher/Smart-Serve/blob/main/docs/VnVPlan/VnVPlan.pdf}{VnV Plan}. This provides a detailed explanation of all of our tests that we reference in this report.

\newpage
\section{Functional Requirements Test Results}
All test results are qualitative and not measured, so we are simply saying "Pass" or "Fail" Depending on the observed behaviour of the system during testing.
    \begin{rotate}{}
    \begin{landscape}
        \begin{table}
           \begin{tabular}{|p{2.75cm}|p{2.5cm}|p{4cm}|p{4.75cm}|p{4.25cm}|p{1.5cm}|}
            \hline
            Test Number & Functional \newline Requirements & Inputs & Expected Outputs & Actual Outputs & Results  \\ [0.5ex]
            \hline\hline
            ST-FR-ICT-01 & MDR6 \newline ODR2 \newline ODR5 \newline ODR8 & Ingredient(s) are out of inventory. & The operator receives a notification on the Web App. Specifying which ingredient vat(s) are empty. Menus on user accounts will display that drinks containing out of inventory ingredients are now unavailable. & Web App displays notification message alerting operator that the respective drink vat has been consumed and must be replaced. Drinks containing the out of inventory ingredient are no longer appearing on the Web App. & Pass \\
            \hline
            ST-FR-ICT-02 & MDR6 \newline ODR2 \newline ODR5 \newline ODR8  & Ingredients are all in inventory. & The operator has no notifications on the Web App relating to ingredients being out of inventory. The menu on a user account has all drinks being available. & Web App displays all drinks are available for order. & Pass \\
            \hline
            ST-FR-ICT-03 & ODR9 \newline ODR10 & Operator inputs all ingredients available and dispenser location of each ingredient into the Web App. & The ingredients and dispenser location map is updated to match the inputted ingredients and dispenser locations added by the operator. The menu on a user account has all drink combinations possible available. & Web App displays all given drink combinations for multiple combinations of inputed drink ingredients (rum and coke ingredients resulted in rum and coke and rum selection). & Pass \\
            \hline
            ST-FR-WAUT-01 & ODR1 & Operator scans QR code with their phone. & Operator successfully reaches the Web App. Web App is functional. & Not available at as this as not been implemented yet & Fail \\
            \hline
            
            \end{tabular}
            \caption{Test Results for Functional Requirements (1)}
            \label{tab: caption}
        \end{table}
     \end{landscape}
    \end{rotate}

    \begin{rotate}{}
    \begin{landscape}
        \begin{table}
           \begin{tabular}{|p{2.75cm}|p{2.5cm}|p{4cm}|p{4.75cm}|p{4.25cm}|p{1.5cm}|}
            \hline
            Test Number & Functional \newline Requirements & Inputs & Expected Outputs & Actual Outputs & Results  \\ [0.5ex]
            \hline\hline
            ST-FR-DOT-01 & ODR4 & Operator orders a drink on a user account. & Operator can view the order number in the queue of orders and the estimated time remaining until the drink is made. & User is able to successfully order a drink. Queue is still being implemented. & Fail \\
            \hline
            ST-FR-DOT-02 & ODR3 & Operator changes the drink order on the user account while waiting in queue. & The drink order is updated to the new order. The order number in the queue remains the same and the estimated time remaining is same. & Queue is still being implemented. & Fail \\
            \hline
            ST-FR-DOT-03 & ODR3 & Operator cancels the drink order on the user account. & The drink order is cancelled and no longer appears in the queue. & Queue is still being implemented. & Fail \\
            \hline
            ST-FR-CPT-01 &  MDR3 \newline MDR7 & Operator orders a drink on a user account with no cup present. & Operator receives a ”no cup present” notification. & When no cup is present hardware successfully relays message to web app alerting user that there is no cup present and drink cannot be made. & Pass \\
            \hline
            ST-FR-CPT-02 & MDR3 \newline MDR7 & Operator supplies a cup into the pouring area while the initial order is still active. & The no cup present notification on the operators account has been removed. & Drink is successfully made and no error message is relayed to the web app. & Pass \\
            \hline
            \end{tabular}
            \caption{Test Results for Functional Requirements (2)}
            \label{tab: caption}
        \end{table}
     \end{landscape}
    \end{rotate}

    \begin{rotate}{}
    
    \begin{landscape}
        \begin{table}
           \begin{tabular}{|p{2.75cm}|p{2.5cm}|p{4cm}|p{4.75cm}|p{4.25cm}|p{1.5cm}|}
            \hline
            Test Number & Functional \newline Requirements & Inputs & Expected Outputs & Actual Outputs & Results  \\ [0.5ex]
            \hline\hline
            ST-FR-DMT-01 & MDR2 \newline MDR4 \newline MDR5 \newline MDR7 \newline MDR8 \newline ODR11 \newline ODR12 & System is dispensing a drink. & Completed drink made with the correct proportions. The correct user account receives a drink is done notification. & Pump successfully dispenses drink into cup with correct proportions. User account receives a drink is done message.  & Pass \\
            \hline
            ST-FR-DMT-02 & MDR9 \newline MDR10 & Operator orders a drink on a user account while a full cup is present. & The user whose drink is completed still has a drink is complete notification. New order does not pour into the already full cup and attempts to cycle to an empty cup for 6 scans. & Notification is present. The full cup is skipped and the system scans for an empty one. & Pass \\
            \hline
            ST-FR-DMT-03 & MDR2 \newline MDR4 \newline MDR5 \newline MDR7 \newline MDR8 \newline ODR11 & Operator adds a cup to the pouring area while scanning from previous test is still occurring. & The drink is successfully poured into the empty cup. & The full cup is skipped still and the drink is successfully poured into the empty cup. & Pass \\
            \hline
            \end{tabular}
            \caption{Test Results for Functional Requirements (3)}
            \label{tab: caption}
        \end{table}
     \end{landscape}
    \end{rotate}            


\section{Nonfunctional Requirements Test Results}
All test results are qualitative and not measured, so we are simply saying "Pass" or "Fail" Depending on the observed behaviour of the system during testing.
    \begin{rotate}{}
    \begin{landscape}
        \begin{table}
           \begin{tabular}{|p{2.75cm}|p{2.5cm}|p{4cm}|p{4.75cm}|p{4.25cm}|p{1.5cm}|}
            \hline
            Test Number & Functional \newline Requirements & Inputs & Expected Outputs & Actual Outputs & Results  \\ [0.5ex]
            \hline\hline
            ST-NFR-UR-01 & UHR4 & Testers are asked to navigate the web page and place an order. Testers will rate their navigating and ordering experience on a scale from 1 to 5: 1 - unusable, 2 - poor, 3 - satisfactory, 4- good, 5 - excellent. & The average score from the testers in the survey is greater than 3 & Testers rate that their navigation and ordering experience are all 3 or higher & Pass \\
            \hline
            ST-NFR-UR-02 & UHR1 & Testers are asked to grab a cup. Testers will report if the machine was too high, too low, or fine. & More than half of the testers say the height is fine. & Testers unanimously agree that the machine height is desirable  & Pass \\
            \hline
            ST-NFR-PR-01 & PR1 & Operator orders a drink on a user account & The drink is made and ready within 45 seconds of input. & Drink is ordered and available to customer within 40 seconds. & Pass \\
            \hline
            ST-NFR-PR-02 & PR2 & Testers are asked to navigate the Web App and perform many different operations. Testers will rate the responsiveness of the webpage on a scale from 1 to 5: 1 - unusable, 2 - slow, 3 - satisfactory, 4- fast, 5 - instant. & The average score from the testers in the survey is larger than 3 & 9 testers consisting of friends and family of the smart-serve team members performed the outline task. The test results consisted of two 5's, one 4, four 3's, and two 2's. The average result was 3 and 1/3. The result was larger than 3 and passing. & Pass \\
            \hline
            \end{tabular}
            \caption{Test Results for Non Functional Requirements (1)}
            \label{tab: caption}
        \end{table}
     \end{landscape}
    \end{rotate}

    \begin{rotate}{}
    \begin{landscape}
        \begin{table}
           \begin{tabular}{|p{2.75cm}|p{2.5cm}|p{4cm}|p{4.75cm}|p{4.25cm}|p{1.5cm}|}
            \hline
            Test Number & Functional \newline Requirements & Inputs & Expected Outputs & Actual Outputs & Results  \\ [0.5ex]
            \hline\hline
            ST-NFR-PR-03 & PR3 & User initiates test case & The order is added to Smart Serves internal database within 20 seconds of input & All orders were received in the database within the required time frame. & Pass \\
            \hline
            ST-NFR-PR-04 & PR4 & Operator orders a drink consisting of a single type of alcohol mixed without anything on a user account & The drink must contain less than 1.1x the amount of expected alcohol & A total of 12 test runs were conducted where all drinks were under the limit. & Pass \\
            \hline
            \hline
            \end{tabular}
            \caption{Test Results for Non Functional Requirements (2)}
            \label{tab: caption}
        \end{table}
     \end{landscape}
    \end{rotate}



	
\section{Comparison to Existing Implementation}	

This section is not appropriate for this project.

\section{Unit Testing}
This section is not applicable for this project.

\section{Changes Due to Testing}
\tab Following our Revision 0 demo, the feedback we received was that the machine needed to have a more streamlined process from start to finish for the end-user. The user should be able to order a drink on the web app with messages/notifications throughout the process until their drink is finished and ready to be retrieved. We have decided to remove the idea of having an operator replenish the empty cup in the turntable between orders and instead give the opportunity to users to order ahead and place them in a virtual queue with waiting times. Once their order is ready to be processed they are alerted to place a cup in the machine. This was done to reduce the extra use cases that would arise if users weren't responsible for placing their own cup along with improving the autonomy of our system. Our testing also, demonstrated that our project was missing communication with the user therefore we have decided to include message boxes/notifications at checkpoints throughout the process to help streamline the order process. This would include a message upon drink selection, during drink creation and finally once drink is complete. Respectively, these would trigger the user to place a cup on the turntable to prepare the drink, prevent any user from ordering a drink during drink creation and finally alert the drink needs to be retrieved upon completion and the next user is available to order. 

\section{Automated Testing}
The code that is used to control the hardware components of the system, will be using PyTest, which helps check for syntax and semantic errors along with verifying certain functionalities of our system. This would include testing the output of the pump sequence, the sensor sequences and the turntable sequence. The Testing tool React Testing Library will be used to automate testing of the Web Application.
		
\section{Trace to Requirements}
\begin{center}
\begin{tabular}{||c c||} 
 \hline
 Test Case & Requirement(s)  \\ [0.5ex] 
 \hline\hline
 ST-FR-ICT-01 & MDR6, ODR2, ODR5, \& ODR8 \\ 
 \hline
 ST-FR-ICT-02 & MDR6, ODR2, ODR5, \& ODR8 \\ 
 \hline
 ST-FR-ICT-03 & ODR9 \& ODR10 \\ 
 \hline
 ST-FR-WAUT-01 & ODR1\\ 
 \hline
 ST-FR-DOT-01 & ODR4 \\ 
 \hline
 ST-FR-DOT-02 & ODR3 \\ 
 \hline
 ST-FR-DOT-03 & ODR3 \\ 
 \hline
 ST-FR-CPT-01 & MDR3 \& MDR7 \\ 
 \hline 
 ST-FR-CPT-02 & MDR3 \& MDR7 \\ 
 \hline
 ST-FR-DMT-01 & MDR2, MDR4, MDR5, MDR7, MDR8, ODR11, \& ODR12 \\ 
 \hline
 ST-FR-DMT-02 & MDR9 \& MDR10 \\ 
 \hline
 ST-FR-DMT-03 & MDR2, MDR4, MDR5, MDR7, MDR8, \& ODR11 \\ 
 \hline
 ST-NFR-UR-01 & UHR4  \\ 
 \hline
 ST-NFR-UR-02 & UHR1 \\
 \hline
 ST-NFR-PR-01 & PR1  \\
 \hline
 ST-NFR-PR-02 & PR2 \\
 \hline
 ST-NFR-PR-03 & PR3 \\ [1ex] 
 \hline
 ST-NFR-PR-04 & PR4 \\ [1ex] 
 \hline
\end{tabular}
\end{center}
		
\section{Trace to Modules}
\begin{center}
\begin{tabular}{||c c||} 
 \hline
 Test Case & Requirement(s)  \\ [0.5ex] 
 \hline\hline
 ST-FR-ICT-01 & M2, M3, M5, M6, \& ODR8 \\ 
 \hline
 ST-FR-ICT-02 & M2, M3, M5, M6, \& ODR8 \\ 
 \hline
 ST-FR-ICT-03 & M6 \& M7 \\ 
 \hline
 ST-FR-DMT-01 & M7 \\ 
 \hline
 ST-NFR-UR-01 & M5  \\ 
 \hline
 ST-NFR-PR-02 & M6, M7, M8, \& M9 \\
 \hline
\end{tabular}
\end{center}

\section{Code Coverage Metrics}
Code coverage was found for the React web application only. There are some lines in the React code that should be modified before the Rev 1 Demo.\\\\

\begin{center}
\begin{tabular}{||c | c | c | c|} 
 \hline
File                 &  Branch (percent) &  Funcs (percent) & Uncovered Line #s \\
\hline
All files            &       0 &       0 &   \\
 src                 &        0 &      0 &    \\
  App.tsx            &      100 &       0 &   10-17 \\
  index.tsx          &     100 &   100 &     7-19 \\
  reportWebVitals.ts &        0 &        0 & 3-10 \\
 src/components      &        0 &        0 & \\
  Buttons.tsx        &     100 &            0 &  \\
  CategoryTitle.tsx  &     100 &            0 & 9 \\ 
  Drinks.tsx         &      0 &       0 &      \\
  Header.tsx         &        0 &       0 &       14-62 \\
  Ingredients.tsx    &      100 &       0 &     6-38 \\
  TextInput.tsx      &        0&       0 &     \\
 src/database        &     100&   100&       \\
  data.ts            &    100 &   100&      10 \\
  disps.ts           &       100&     100 &     1 \\
  ings.ts            &      100 &     100 &       1 \\
 src/pages           &        0 &       0&       \\
  Admin.tsx          &       100&       0 & 9-11 \\
  Login.tsx          &         0 &      0&10-56 \\
  Main.tsx           &       100 &       0 &6 \\
 \hline
\end{tabular}
\end{center}



\bibliographystyle{plainnat}
\bibliography{../../refs/References}

\newpage{}
\section*{Appendix --- Reflection}

The information in this section will be used to evaluate the team members on the
graduate attribute of Reflection.  Please answer the following question:

\begin{enumerate}
  \item In what ways was the Verification and Validation (VnV) Plan different
  from the activities that were actually conducted for VnV?  If there were
  differences, what changes required the modification in the plan?  Why did
  these changes occur?  Would you be able to anticipate these changes in future
  projects?  If there weren't any differences, how was your team able to clearly
  predict a feasible amount of effort and the right tasks needed to build the
  evidence that demonstrates the required quality?  (It is expected that most
  teams will have had to deviate from their original VnV Plan.) \\

  Max: It seemed initially a plan was good for created structure for when we begin to test, however in theory is not always what ends up happening in reality. We noticed that there were some tests that were being conducted that didn't necessarily support our requirements or they were just no longer applicable to the requirements we were trying to create. We needed to modify some of the test cases and add a few in order to verify all our requirements along with testing for all use cases of our system. These changes mostly occurred due to the fact that we didn't really account for all use cases of our system until we could actually physical test it and allow other stakeholder access our system. In order to anticipate these changes in future projects it would make sense to have other stakeholders that are not a part of building and designing the system to generate and test use cases that potentially our system could do.

  Ryan: Our initial VnV Plan differed quite a bit from the testing that we actually conducted in out VnV Report. When we were conducting the tests, we realized that some of the behaviour that we initially expected was not the most optimal, and we needed to further clarify exactly what behaviour we expected for the different scenarios. This helped to refine some of our functionality. This ultimately changed some test cases. One example of this is as a team we tested the scenarios of our device pouring an order for 0, 1, and two cups with scenarios where they are empty and full. When we tried the scenario with 0 cups, our initial functionality was that we continuously scan for a cup while giving time for a customer to put a cup in. We decided that after a certain point, we should actually stop this and send a message to the user that they need to put in a cup. These changes occurred because we needed to spend more time thinking about our device in its various use cases than we had. In future projects, I think I would be able to better anticipate these as I have a greater appreciation for the planning out of a project after completing most of our Capstone.

  David: Our VnV Plan had a comprehensive list of test cases and scenarios that we wanted to cover to ensure that all requirements were met. However, during the actual testing phase, we encountered unexpected errors and issues. As a result, we had to modify our test cases and add new ones to cover these scenarios. For example, we discovered that our system did not handle unexpected inputs well, which was not covered in our initial plan. We had to create new test cases to cover these scenarios and modify our existing ones accordingly. These changes occurred because we did not have a full understanding of the potential issues that could arise during testing. To anticipate these changes in future projects, we would need to conduct more thorough risk assessments and have contingency plans in place for unexpected issues that may arise during testing.

  Peter: Our initial VnV plan consisted of testing around our project with features that we no longer found optimal as we began developing the project. We found that some of the initial ideas we had could be replaced with simpler and more intuitive solutions. For example, we were planning on having and testing a light indicator to signal to the user when the drink was complete. However, as we began to develop the project more, we realized that the idea was simply not good. Some of our initial tests revolved around this light feature and thus the testing format had to slightly be altered. We chose to alter the tests by having them be more general. For example, the test would simply be that the user is notified that the drink is complete rather than signaling the method by which they are notified. In the future, we can adjust this by not having such specific test cases which are solution-oriented, as opposed to requirement oriented.

  Sam: Our VnV plan had to be updated when completing our VnV report. This was because some of the functionalities were adjusted or removed as they weren't as necessary. One example of this was the light feedback system that would show a green light, or red light depending on the status of the system. This was found to be redundant and unnecessary as the user and/or operator can simply be sent a message indicating the status of the system. When performing the test cases we set out in the VnV plan we realized that there were other functionalities we weren't testing for that required more test cases. We didn't anticipate these test cases until we built the physical Smart Serve system. One potential way to anticipate these changes in future projects would be to have other stakeholders or potential users that aren't directly involved in creating or developing the project and test the system to ensure all the different use cases are covered.
  
\end{enumerate}

\end{document}
